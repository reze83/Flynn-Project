version: "1.0"

# Flynn Security Policy
# Controls what operations agents can perform

permissions:
  shell:
    allow:
      - "git *"
      - "pnpm *"
      - "npm *"
      - "uv *"
      - "node *"
      - "python *"
      - "pip *"
      - "npx *"
      - "tsc *"
      - "biome *"
      - "vitest *"
      - "ruff *"
    deny:
      - "rm -rf /"
      - "rm -rf ~"
      - "rm -rf /*"
      - "sudo *"
      - "chmod 777 *"
      - "curl * | bash"
      - "wget * | bash"

  paths:
    whitelist:
      - "${PROJECT_ROOT}"
      - "${PROJECT_ROOT}/**"
    writable:
      - "${XDG_DATA_HOME}/flynn"
      - "${XDG_CACHE_HOME}/flynn"
      - "${PROJECT_ROOT}"
      - "${PROJECT_ROOT}/**"
    readonly:
      - "/etc"
      - "/usr"
      - "/bin"
      - "/sbin"

  network:
    allow:
      - "api.anthropic.com"
      - "api.openai.com"
      - "registry.npmjs.org"
      - "pypi.org"
      - "github.com"
    deny:
      - "*"  # Deny all others by default

agents:
  max_iterations: 10
  timeout_seconds: 300
  max_retries: 3

logging:
  level: info
  format: json
  include_timestamps: true
